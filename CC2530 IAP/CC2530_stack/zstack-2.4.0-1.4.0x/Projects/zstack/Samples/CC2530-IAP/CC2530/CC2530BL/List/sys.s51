///////////////////////////////////////////////////////////////////////////////
//
// IAR C/C++ Compiler V9.10.1.2146 for 8051               07/Jul/2023  16:40:19
// Copyright 2004-2014 IAR Systems AB.
// Standalone license - IAR Embedded Workbench for 8051
//
//    Core               =  plain
//    Code model         =  near
//    Data model         =  large
//    Calling convention =  xdata reentrant
//    Constant location  =  data
//    Dptr setup         =  1,16
//                          
//    Source file        =  
//        I:\1_git_code\EPnode_OTA\CC2530
//        IAP\CC2530_stack\zstack-2.4.0-1.4.0x\Projects\zstack\Samples\CC2530-IAP\Source\sys\sys.c
//    Command line       =  
//        "I:\1_git_code\EPnode_OTA\CC2530
//        IAP\CC2530_stack\zstack-2.4.0-1.4.0x\Projects\zstack\Samples\CC2530-IAP\Source\sys\sys.c"
//        -D HAL_SB_BOOT_CODE -D HAL_UART=TRUE -D HAL_UART_DMA=0 -D
//        HAL_UART_ISR=1 -D HAL_UART_ISR_RX_MAX=254 -lC
//        "I:\1_git_code\EPnode_OTA\CC2530
//        IAP\CC2530_stack\zstack-2.4.0-1.4.0x\Projects\zstack\Samples\CC2530-IAP\CC2530\CC2530BL\List\"
//        -lA "I:\1_git_code\EPnode_OTA\CC2530
//        IAP\CC2530_stack\zstack-2.4.0-1.4.0x\Projects\zstack\Samples\CC2530-IAP\CC2530\CC2530BL\List\"
//        --diag_suppress Pe001,Pa010,Pa050 -o "I:\1_git_code\EPnode_OTA\CC2530
//        IAP\CC2530_stack\zstack-2.4.0-1.4.0x\Projects\zstack\Samples\CC2530-IAP\CC2530\CC2530BL\Obj\"
//        -e --debug --core=plain --dptr=16,1 --data_model=large
//        --code_model=near --calling_convention=xdata_reentrant
//        --place_constants=data --nr_virtual_regs 8 -I
//        "I:\1_git_code\EPnode_OTA\CC2530
//        IAP\CC2530_stack\zstack-2.4.0-1.4.0x\Projects\zstack\Samples\CC2530-IAP\CC2530\..\Source\drive\"
//        -I "I:\1_git_code\EPnode_OTA\CC2530
//        IAP\CC2530_stack\zstack-2.4.0-1.4.0x\Projects\zstack\Samples\CC2530-IAP\CC2530\..\Source\iap\"
//        -I "I:\1_git_code\EPnode_OTA\CC2530
//        IAP\CC2530_stack\zstack-2.4.0-1.4.0x\Projects\zstack\Samples\CC2530-IAP\CC2530\..\Source\shell\"
//        -I "I:\1_git_code\EPnode_OTA\CC2530
//        IAP\CC2530_stack\zstack-2.4.0-1.4.0x\Projects\zstack\Samples\CC2530-IAP\CC2530\..\Source\sys\"
//        -I "I:\1_git_code\EPnode_OTA\CC2530
//        IAP\CC2530_stack\zstack-2.4.0-1.4.0x\Projects\zstack\Samples\CC2530-IAP\CC2530\..\Source\"
//        -I "I:\1_git_code\EPnode_OTA\CC2530
//        IAP\CC2530_stack\zstack-2.4.0-1.4.0x\Projects\zstack\Samples\CC2530-IAP\CC2530\source\"
//        -I "I:\1_git_code\EPnode_OTA\CC2530
//        IAP\CC2530_stack\zstack-2.4.0-1.4.0x\Projects\zstack\Samples\CC2530-IAP\CC2530\..\..\common\"
//        -I "I:\1_git_code\EPnode_OTA\CC2530
//        IAP\CC2530_stack\zstack-2.4.0-1.4.0x\Projects\zstack\Samples\CC2530-IAP\CC2530\..\..\..\ZMain\TI2530DB\"
//        -I "I:\1_git_code\EPnode_OTA\CC2530
//        IAP\CC2530_stack\zstack-2.4.0-1.4.0x\Projects\zstack\Samples\CC2530-IAP\CC2530\..\..\..\..\..\Components\hal\include\"
//        -I "I:\1_git_code\EPnode_OTA\CC2530
//        IAP\CC2530_stack\zstack-2.4.0-1.4.0x\Projects\zstack\Samples\CC2530-IAP\CC2530\..\..\..\..\..\Components\hal\target\_COMMON\CC2530\"
//        -I "I:\1_git_code\EPnode_OTA\CC2530
//        IAP\CC2530_stack\zstack-2.4.0-1.4.0x\Projects\zstack\Samples\CC2530-IAP\CC2530\..\..\..\..\..\Components\hal\target\CC2530EB\"
//        -I "I:\1_git_code\EPnode_OTA\CC2530
//        IAP\CC2530_stack\zstack-2.4.0-1.4.0x\Projects\zstack\Samples\CC2530-IAP\CC2530\..\..\..\..\..\Components\osal\include\"
//        -I "I:\1_git_code\EPnode_OTA\CC2530
//        IAP\CC2530_stack\zstack-2.4.0-1.4.0x\Projects\zstack\Samples\CC2530-IAP\CC2530\..\..\..\..\..\Components\services\saddr\"
//        -Ohz
//    List file          =  
//        I:\1_git_code\EPnode_OTA\CC2530
//        IAP\CC2530_stack\zstack-2.4.0-1.4.0x\Projects\zstack\Samples\CC2530-IAP\CC2530\CC2530BL\List\sys.s51
//
///////////////////////////////////////////////////////////////////////////////

        NAME sys

        RTMODEL "__SystemLibrary", "CLib"
        RTMODEL "__calling_convention", "xdata_reentrant"
        RTMODEL "__code_model", "near"
        RTMODEL "__core", "plain"
        RTMODEL "__data_model", "large"
        RTMODEL "__dptr_size", "16"
        RTMODEL "__extended_stack", "disabled"
        RTMODEL "__iar_require _formatted_write", ""
        RTMODEL "__location_for_constants", "data"
        RTMODEL "__number_of_dptrs", "1"
        RTMODEL "__rt_version", "1"

        RSEG DOVERLAY:DATA:NOROOT(0)
        RSEG IOVERLAY:IDATA:NOROOT(0)
        RSEG ISTACK:IDATA:NOROOT(0)
        RSEG PSTACK:XDATA:NOROOT(0)
        RSEG XSTACK:XDATA:NOROOT(0)

        EXTERN ?V0
        EXTERN ?V1
        EXTERN ?V2
        EXTERN ?V3
        EXTERN ?V4
        EXTERN ?V5
        EXTERN ?V6
        EXTERN ?V7
        EXTERN ?DEALLOC_XSTACK8
        EXTERN ?FUNC_ENTER_XDATA
        EXTERN ?FUNC_LEAVE_XDATA
        EXTERN ?L_ADD
        EXTERN ?L_ADD_TO_X
        EXTERN ?L_ADD_X
        EXTERN ?L_MOV_X
        EXTERN ?PUSH_XSTACK_I_TWO
        EXTERN ?S_SHL
        EXTERN ?UL_GT_X
        EXTERN ?UL_SHR
        EXTERN __INIT_XDATA_I
        EXTERN __INIT_XDATA_Z

        PUBWEAK ADCCON1
        PUBWEAK ADCCON3
        PUBWEAK ADCH
        PUBWEAK CLKCONCMD
        PUBWEAK P1DIR
        PUBWEAK P1SEL
        PUBWEAK _A_P1
        PUBWEAK __Constant_1
        PUBWEAK __Constant_bb9
        PUBWEAK __Constant_ffffffff
        PUBLIC delay_ms
        FUNCTION delay_ms,021203H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME XSTACK, 8, STACK
        PUBLIC halWait
        FUNCTION halWait,080203H
        ARGFRAME XSTACK, 8, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        LOCFRAME XSTACK, 15, STACK
        PUBLIC keyInit
        FUNCTION keyInit,0203H
        ARGFRAME XSTACK, 0, STACK
        PUBLIC led_app
        FUNCTION led_app,080203H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME XSTACK, 11, STACK
        PUBLIC led_init
        FUNCTION led_init,0203H
        ARGFRAME XSTACK, 0, STACK
        PUBLIC vddWait
        FUNCTION vddWait,0203H
        ARGFRAME XSTACK, 0, STACK
        PUBLIC write_sys_parameter
        FUNCTION write_sys_parameter,0a1201H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME XSTACK, 11, STACK
        
          CFI Names cfiNames0
          CFI StackFrame CFA_SP SP IDATA
          CFI StackFrame CFA_PSP16 PSP16 XDATA
          CFI StackFrame CFA_XSP16 XSP16 XDATA
          CFI StaticOverlayFrame CFA_IOVERLAY IOVERLAY
          CFI StaticOverlayFrame CFA_DOVERLAY DOVERLAY
          CFI Resource `PSW.CY`:1, `B.BR0`:1, `B.BR1`:1, `B.BR2`:1, `B.BR3`:1
          CFI Resource `B.BR4`:1, `B.BR5`:1, `B.BR6`:1, `B.BR7`:1, `VB.BR8`:1
          CFI Resource `VB.BR9`:1, `VB.BR10`:1, `VB.BR11`:1, `VB.BR12`:1
          CFI Resource `VB.BR13`:1, `VB.BR14`:1, `VB.BR15`:1, VB:8, B:8, A:8
          CFI Resource PSW:8, DPL0:8, DPH0:8, R0:8, R1:8, R2:8, R3:8, R4:8, R5:8
          CFI Resource R6:8, R7:8, V0:8, V1:8, V2:8, V3:8, V4:8, V5:8, V6:8, V7:8
          CFI Resource SP:8, PSPH:8, PSPL:8, PSP16:16, XSPH:8, XSPL:8, XSP16:16
          CFI VirtualResource ?RET:16, ?RET_HIGH:8, ?RET_LOW:8
          CFI ResourceParts PSP16 PSPH, PSPL
          CFI ResourceParts XSP16 XSPH, XSPL
          CFI ResourceParts ?RET ?RET_HIGH, ?RET_LOW
          CFI EndNames cfiNames0
        
          CFI Common cfiCommon0 Using cfiNames0
          CFI CodeAlign 1
          CFI DataAlign -1
          CFI ReturnAddress ?RET CODE
          CFI CFA_DOVERLAY Used
          CFI CFA_IOVERLAY Used
          CFI CFA_SP SP+-2
          CFI CFA_PSP16 PSP16+0
          CFI CFA_XSP16 XSP16+0
          CFI `PSW.CY` SameValue
          CFI `B.BR0` SameValue
          CFI `B.BR1` SameValue
          CFI `B.BR2` SameValue
          CFI `B.BR3` SameValue
          CFI `B.BR4` SameValue
          CFI `B.BR5` SameValue
          CFI `B.BR6` SameValue
          CFI `B.BR7` SameValue
          CFI `VB.BR8` SameValue
          CFI `VB.BR9` SameValue
          CFI `VB.BR10` SameValue
          CFI `VB.BR11` SameValue
          CFI `VB.BR12` SameValue
          CFI `VB.BR13` SameValue
          CFI `VB.BR14` SameValue
          CFI `VB.BR15` SameValue
          CFI VB SameValue
          CFI B Undefined
          CFI A Undefined
          CFI PSW SameValue
          CFI DPL0 SameValue
          CFI DPH0 SameValue
          CFI R0 Undefined
          CFI R1 Undefined
          CFI R2 Undefined
          CFI R3 Undefined
          CFI R4 Undefined
          CFI R5 Undefined
          CFI R6 SameValue
          CFI R7 SameValue
          CFI V0 SameValue
          CFI V1 SameValue
          CFI V2 SameValue
          CFI V3 SameValue
          CFI V4 SameValue
          CFI V5 SameValue
          CFI V6 SameValue
          CFI V7 SameValue
          CFI PSPH Undefined
          CFI PSPL Undefined
          CFI XSPH Undefined
          CFI XSPL Undefined
          CFI ?RET Concat
          CFI ?RET_HIGH Frame(CFA_SP, 2)
          CFI ?RET_LOW Frame(CFA_SP, 1)
          CFI EndCommon cfiCommon0
        
        EXTERN HalFlashErase
        FUNCTION HalFlashErase,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN HalFlashWrite
        FUNCTION HalFlashWrite,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 11, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN printf
        FUNCTION printf,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN sys_parameter

// I:\1_git_code\EPnode_OTA\CC2530 IAP\CC2530_stack\zstack-2.4.0-1.4.0x\Projects\zstack\Samples\CC2530-IAP\Source\sys\sys.c
//    1 #include "sys.h"

        ASEGN SFR_AN:DATA:NOROOT,090H
// union <unnamed> volatile __sfr _A_P1
_A_P1:
        DATA8
        DS 1

        ASEGN SFR_AN:DATA:NOROOT,0b4H
// unsigned char volatile __sfr ADCCON1
ADCCON1:
        DATA8
        DS 1

        ASEGN SFR_AN:DATA:NOROOT,0b6H
// unsigned char volatile __sfr ADCCON3
ADCCON3:
        DATA8
        DS 1

        ASEGN SFR_AN:DATA:NOROOT,0bbH
// unsigned char volatile __sfr ADCH
ADCH:
        DATA8
        DS 1

        ASEGN SFR_AN:DATA:NOROOT,0c6H
// unsigned char volatile __sfr CLKCONCMD
CLKCONCMD:
        DATA8
        DS 1

        ASEGN SFR_AN:DATA:NOROOT,0f4H
// unsigned char volatile __sfr P1SEL
P1SEL:
        DATA8
        DS 1

        ASEGN SFR_AN:DATA:NOROOT,0feH
// unsigned char volatile __sfr P1DIR
P1DIR:
        DATA8
        DS 1
//    2 #include "iap_config.h"
//    3 
//    4 // 初始化两个按键

        RSEG NEAR_CODE:CODE:NOROOT(0)
//    5 void keyInit(void)
keyInit:
          CFI Block cfiBlock0 Using cfiCommon0
          CFI Function keyInit
        CODE
//    6 {
        ; Saved register size: 0
        ; Auto size: 0
//    7   P1SEL &= ~0x0C;       //设置P1端口的2、3为IO模式
        ANL     0xf4,#0xf3
//    8   P1DIR &= ~0x0C;       //设置P1端口的2、3为输入模式
        ANL     0xfe,#0xf3
//    9 }
        RET
          CFI EndBlock cfiBlock0
        REQUIRE P1SEL
        REQUIRE P1DIR
//   10 
//   11 // 初始化LED

        RSEG NEAR_CODE:CODE:NOROOT(0)
//   12 void led_init(void)
led_init:
          CFI Block cfiBlock1 Using cfiCommon0
          CFI Function led_init
        CODE
//   13 {
        ; Saved register size: 0
        ; Auto size: 0
//   14     P1SEL &= ~0x03;          //P1.0 P1.1为普通 I/O 口
        ANL     0xf4,#0xfc
//   15     P1DIR |= 0x03;           //输出
        ORL     0xfe,#0x3
//   16     
//   17     LED2 = 1;                //关LED
        SETB    0x90.0
//   18     LED1 = 1;
        SETB    0x90.1
//   19 }
        RET
          CFI EndBlock cfiBlock1
        REQUIRE P1SEL
        REQUIRE P1DIR
        REQUIRE _A_P1
//   20 
//   21 // LED的APP

        RSEG NEAR_CODE:CODE:NOROOT(0)
//   22 void led_app(void)
led_app:
          CFI Block cfiBlock2 Using cfiCommon0
          CFI Function led_app
        CODE
//   23 {
        REQUIRE ?V0
        REQUIRE ?V1
        REQUIRE ?V2
        REQUIRE ?V3
        MOV     A,#-0xb
        LCALL   ?FUNC_ENTER_XDATA
          CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
          CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
          CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-3)))
          CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-4)))
          CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-5)))
          CFI V3 load(1, XDATA, add(CFA_XSP16, literal(-6)))
          CFI V2 load(1, XDATA, add(CFA_XSP16, literal(-7)))
          CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-8)))
          CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-9)))
          CFI VB load(1, XDATA, add(CFA_XSP16, literal(-10)))
          CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-11)))
          CFI CFA_SP SP+0
          CFI CFA_XSP16 add(XSP16, 11)
        ; Saved register size: 11
        ; Auto size: 0
//   24   static uint32 times=0;
//   25   if(times>3000){
        MOV     DPTR,#__Constant_bb9
        MOV     R0,#?V0
        LCALL   ?L_MOV_X
        MOV     DPTR,#??times
        MOV     R0,#?V0
        LCALL   ?UL_GT_X
        JC      ??led_app_0
//   26     times=0;
        MOV     DPTR,#??times
        CLR     A
        MOVX    @DPTR,A
        INC     DPTR
        MOVX    @DPTR,A
        INC     DPTR
        MOVX    @DPTR,A
        INC     DPTR
        MOVX    @DPTR,A
//   27     LED1=!LED1;
        SETB    B.0
        MOV     C,0x90.1
        MOV     C,0x90.1
        JNB     B.0,??led_app_1
        CPL     C
??led_app_1:
        MOV     0x90.1,C
//   28   }
//   29   times++;
??led_app_0:
        MOV     DPTR,#__Constant_1
        MOV     R0,#?V0
        LCALL   ?L_MOV_X
        MOV     DPTR,#??times
        MOV     R0,#?V0
        LCALL   ?L_ADD_TO_X
//   30 }
        MOV     R7,#0x4
        LJMP    ?FUNC_LEAVE_XDATA
          CFI EndBlock cfiBlock2
        REQUIRE _A_P1

        RSEG XDATA_Z:XDATA:NOROOT(0)
        DATA32
??times:
        DS 4
        REQUIRE __INIT_XDATA_Z
//   31 
//   32 // 等待电压

        RSEG NEAR_CODE:CODE:NOROOT(0)
//   33 void vddWait(uint8 vdd)
vddWait:
          CFI Block cfiBlock3 Using cfiCommon0
          CFI Function vddWait
        CODE
//   34 {
        ; Saved register size: 0
        ; Auto size: 0
//   35   uint8 cnt = 16;
        MOV     R0,#0x10
//   36 
//   37   do {
//   38     do {
//   39       ADCCON3 = 0x0F;
??vddWait_0:
        MOV     0xb6,#0xf
//   40       while (!(ADCCON1 & 0x80));
??vddWait_1:
        MOV     A,0xb4
        MOV     C,0xE0 /* A   */.7
        JNC     ??vddWait_1
//   41     } while (ADCH < vdd);
        MOV     A,0xbb
        CLR     C
        SUBB    A,R1
        JC      ??vddWait_0
//   42   } while (--cnt);
        DEC     R0
        MOV     A,R0
        JNZ     ??vddWait_0
//   43 }
        RET
          CFI EndBlock cfiBlock3
        REQUIRE ADCCON3
        REQUIRE ADCCON1
        REQUIRE ADCH
//   44 
//   45 //功能：延时函数，ms
//   46 //参数：wait:延时时间,最大延时255ms
//   47 //返回：无

        RSEG NEAR_CODE:CODE:NOROOT(0)
//   48 void halWait(unsigned char wait)
halWait:
          CFI Block cfiBlock4 Using cfiCommon0
          CFI Function halWait
        CODE
//   49 {
        REQUIRE ?V0
        REQUIRE ?V1
        REQUIRE ?V2
        REQUIRE ?V3
        REQUIRE ?V4
        REQUIRE ?V5
        REQUIRE ?V6
        REQUIRE ?V7
        MOV     A,#-0xf
        LCALL   ?FUNC_ENTER_XDATA
          CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
          CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
          CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-3)))
          CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-4)))
          CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-5)))
          CFI V7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
          CFI V6 load(1, XDATA, add(CFA_XSP16, literal(-7)))
          CFI V5 load(1, XDATA, add(CFA_XSP16, literal(-8)))
          CFI V4 load(1, XDATA, add(CFA_XSP16, literal(-9)))
          CFI V3 load(1, XDATA, add(CFA_XSP16, literal(-10)))
          CFI V2 load(1, XDATA, add(CFA_XSP16, literal(-11)))
          CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-12)))
          CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-13)))
          CFI VB load(1, XDATA, add(CFA_XSP16, literal(-14)))
          CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-15)))
          CFI CFA_SP SP+0
          CFI CFA_XSP16 add(XSP16, 15)
        ; Saved register size: 15
        ; Auto size: 0
        MOV     A,R1
//   50   unsigned long largeWait;
//   51 
//   52   if(wait == 0)
        JZ      ??halWait_0
//   53   {return;}
//   54   largeWait = ((unsigned short) (wait << 7));
//   55   largeWait += 114*wait;
//   56 
//   57   largeWait = (largeWait >> CLKSPEED);
        MOV     R4,A
        MOV     ?V0,R4
        MOV     ?V1,#0x0
        MOV     A,#0x7
        MOV     R0,#?V0
        LCALL   ?S_SHL
        MOV     ?V2,A
        MOV     ?V3,A
        MOV     A,R4
        MOV     B,#0x72
        MUL     AB
        MOV     R4,A
        MOV     R0,B
        CLR     A
        ADD     A,R0
        MOV     ?V4,R4
        MOV     ?V5,A
        RLC     A
        SUBB    A,0xE0 /* A   */
        MOV     ?V6,A
        MOV     ?V7,A
        MOV     R0,#?V0
        MOV     R1,#?V4
        LCALL   ?L_ADD
        MOV     A,0xc6
        ANL     A,#0x7
        MOV     R0,#?V0
        LCALL   ?UL_SHR
//   58   while(largeWait--);
??halWait_1:
        MOV     ?V4,?V0
        MOV     ?V5,?V1
        MOV     ?V6,?V2
        MOV     ?V7,?V3
        MOV     DPTR,#__Constant_ffffffff
        MOV     R0,#?V0
        LCALL   ?L_ADD_X
        MOV     A,?V4
        ORL     A,?V5
        ORL     A,?V6
        ORL     A,?V7
        JNZ     ??halWait_1
//   59 
//   60   return;
??halWait_0:
        MOV     R7,#0x8
        LJMP    ?FUNC_LEAVE_XDATA
          CFI EndBlock cfiBlock4
        REQUIRE CLKCONCMD
//   61 }
//   62 
//   63 // 延时函数

        RSEG NEAR_CODE:CODE:NOROOT(0)
//   64 void delay_ms(u16 t)
delay_ms:
          CFI Block cfiBlock5 Using cfiCommon0
          CFI Function delay_ms
        CODE
//   65 {
        FUNCALL delay_ms, halWait
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 8, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 8, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0x8
        LCALL   ?FUNC_ENTER_XDATA
          CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
          CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
          CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-3)))
          CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-4)))
          CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-5)))
          CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-6)))
          CFI VB load(1, XDATA, add(CFA_XSP16, literal(-7)))
          CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-8)))
          CFI CFA_SP SP+0
          CFI CFA_XSP16 add(XSP16, 8)
        ; Saved register size: 8
        ; Auto size: 0
        MOV     A,R2
        MOV     R6,A
        MOV     A,R3
        MOV     R7,A
        SJMP    ??delay_ms_0
//   66   while(t--)
//   67   {
//   68     halWait(1);
??delay_ms_1:
        ; Setup parameters for call to function halWait
        MOV     R1,#0x1
        LCALL   halWait
//   69   }
??delay_ms_0:
        MOV     A,R6
        MOV     R0,A
        MOV     A,R7
        MOV     R1,A
        MOV     A,R0
        ADD     A,#-0x1
        DEC     R6
        MOV     A,R1
        ADDC    A,#-0x1
        MOV     R7,A
        MOV     A,R0
        ORL     A,R1
        JNZ     ??delay_ms_1
//   70 }
        MOV     R7,#0x1
        LJMP    ?FUNC_LEAVE_XDATA
          CFI EndBlock cfiBlock5
//   71 
//   72 // 写系统参数

        RSEG NEAR_CODE:CODE:NOROOT(0)
//   73 void write_sys_parameter()
write_sys_parameter:
          CFI Block cfiBlock6 Using cfiCommon0
          CFI Function write_sys_parameter
        CODE
//   74 {
        FUNCALL write_sys_parameter, HalFlashErase
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL write_sys_parameter, HalFlashWrite
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 11, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 11, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL write_sys_parameter, printf
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        REQUIRE ?V0
        REQUIRE ?V1
        MOV     A,#-0x9
        LCALL   ?FUNC_ENTER_XDATA
          CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
          CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
          CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-3)))
          CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-4)))
          CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-5)))
          CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-6)))
          CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-7)))
          CFI VB load(1, XDATA, add(CFA_XSP16, literal(-8)))
          CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-9)))
          CFI CFA_SP SP+0
          CFI CFA_XSP16 add(XSP16, 9)
        ; Saved register size: 9
        ; Auto size: 0
//   75   if(sizeof(sys_parameter)<=PARA_PARTITION_SIZE ){
//   76     HalFlashErase(PARA_PARTITION_PAGE);
        ; Setup parameters for call to function HalFlashErase
        MOV     R1,#0x9
        LCALL   HalFlashErase
//   77     SYS_PARAMETER_WRITE;
        ; Setup parameters for call to function HalFlashWrite
        MOV     ?V0,#0x1
        MOV     ?V1,#0x0
        MOV     R0,#?V0
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 11)
        MOV     R4,#sys_parameter & 0xff
        MOV     R5,#(sys_parameter >> 8) & 0xff
        MOV     R2,#0x0
        MOV     R3,#0x12
        LCALL   HalFlashWrite
        MOV     A,#0x2
        LCALL   ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 9)
//   78     debug_info(INFO"System Parameter Write Success!\r\n");
        ; Setup parameters for call to function printf
        MOV     R2,#`?<Constant "INFORMATION:System Pa...">` & 0xff
        MOV     R3,#(`?<Constant "INFORMATION:System Pa...">` >> 8) & 0xff
        LCALL   printf
//   79   }else{
//   80     debug_err(ERR"System Parameter Write Failed!");
//   81   }
//   82 }
        MOV     R7,#0x2
        LJMP    ?FUNC_LEAVE_XDATA
          CFI EndBlock cfiBlock6

        RSEG XDATA_ID:CODE:NOROOT(0)
`?<Initializer for <Constant "INFORMATION:Syste`:
        DB "INFORMATION:System Parameter Write Success!\015\012"

        RSEG XDATA_ID:CODE:NOROOT(0)
`?<Initializer for __Constant_bb9>`:
        DATA32
        DD 3001

        RSEG XDATA_ID:CODE:NOROOT(0)
`?<Initializer for __Constant_1>`:
        DATA32
        DD 1

        RSEG XDATA_ID:CODE:NOROOT(0)
`?<Initializer for __Constant_ffffffff>`:
        DATA32
        DD 4294967295

        RSEG XDATA_I:XDATA:NOROOT(0)
        DATA8
`?<Constant "INFORMATION:System Pa...">`:
        DS 46
        REQUIRE `?<Initializer for <Constant "INFORMATION:Syste`
        REQUIRE __INIT_XDATA_I

        RSEG XDATA_I:XDATA:NOROOT(0)
        DATA32
__Constant_bb9:
        DS 4
        REQUIRE `?<Initializer for __Constant_bb9>`
        REQUIRE __INIT_XDATA_I

        RSEG XDATA_I:XDATA:NOROOT(0)
        DATA32
__Constant_1:
        DS 4
        REQUIRE `?<Initializer for __Constant_1>`
        REQUIRE __INIT_XDATA_I

        RSEG XDATA_I:XDATA:NOROOT(0)
        DATA32
__Constant_ffffffff:
        DS 4
        REQUIRE `?<Initializer for __Constant_ffffffff>`
        REQUIRE __INIT_XDATA_I

        END
// 
// 290 bytes in segment NEAR_CODE
//   7 bytes in segment SFR_AN
//  58 bytes in segment XDATA_I
//  58 bytes in segment XDATA_ID
//   4 bytes in segment XDATA_Z
// 
// 336 bytes of CODE  memory (+ 12 bytes shared)
//   0 bytes of DATA  memory (+  7 bytes shared)
//  50 bytes of XDATA memory (+ 12 bytes shared)
//
//Errors: none
//Warnings: none
